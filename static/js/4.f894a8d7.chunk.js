(this["webpackJsonp@rclone/rclone-webui"]=this["webpackJsonp@rclone/rclone-webui"]||[]).push([[4],{390:function(e,t,a){"use strict";var n=a(32),r=a(33),l=a(69),c=a(68),s=a(70),o=a(0),i=a.n(o),u=a(383),d=a(557),m=a(384),p=a(337),b=a(38),f=a.n(b),E=a(444),g=a(102),h=a(408),v=a(44);function N(){return f.a.createPortal(i.a.createElement(E.a,{mode:"modal"}),document.getElementById(v.d))}var y=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).toggleCheckStatus=function(){var e=a.props,t=e.checkStatus,n=e.enableCheckStatus;console.log(t,n),n(!t)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getStatus(),this.refreshInterval=setInterval((function(){return e.props.getStatus()}),v.f)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshInterval)}},{key:"render",value:function(){var e=this.props,t=e.isConnected,a=e.mode,n=e.checkStatus,r=localStorage.getItem(v.c),l=localStorage.getItem(v.g);return"card"===a?i.a.createElement(u.a,{className:"text-center "+(t?"card-accent-info":"card-accent-warning")},i.a.createElement(d.a,null,"Overview"),i.a.createElement(m.a,null,i.a.createElement(O,{checkStatus:n,connectivityStatus:t,ipAddress:r,userName:l}))):i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{type:"primary",onClick:this.toggleCheckStatus,className:t?"bg-info  d-none d-lg-block":"bg-warning d-none d-lg-block"}," ",n?t?"CONNECTED":"DISCONNECTED":"DISABLED"),i.a.createElement(N,null))}}]),t}(i.a.Component);function O(e){var t=e.connectivityStatus,a=e.checkStatus,n=e.ipAddress,r=e.userName,l="";return l=a?t?"rClone Backend is connected and working as expected":"Cannot connect to rclone backend. There is a problem with connecting to {ipAddress}.":"Not monitoring connectivity status. Tap the icon in navbar to start.",i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement("span",{className:"card-subtitle"},"Status: "," "),i.a.createElement("span",{className:"card-text"},l)),i.a.createElement("p",null,i.a.createElement("span",{className:"card-subtitle"},"Current IP Address: "," "),i.a.createElement("span",{className:"card-text"},n)),i.a.createElement("p",null,i.a.createElement("span",{className:"card-subtitle"},"Username: "," "),i.a.createElement("span",{className:"card-text"},r)))}y.defaultProps={mode:"card"};t.a=Object(g.b)((function(e){return{isConnected:e.status.isConnected,isDisabled:e.status.isDisabled,checkStatus:e.status.checkStatus}}),{getStatus:h.c,enableCheckStatus:h.a})(y)},408:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return m}));var n=a(79),r=a.n(n),l=a(107),c=a(77),s=a(4),o=a(53),i=function(){return function(){var e=Object(l.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a(),n.status.checkStatus&&c.a.post(o.a.stats).then((function(e){return t({type:s.r,status:s.I,payload:e.data})}),(function(e){return t({type:s.r,status:s.G,payload:e})}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},u=function(e){return function(){var t=Object(l.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:s.q,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(){return function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.a.post(o.a.bwlimit).then((function(e){return t({type:s.s,status:s.I,payload:e.data})}),(function(e){return t({type:s.s,status:s.G,payload:e})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(l.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.a.post(o.a.bwlimit,{rate:e}).then((function(e){return a({type:s.J,status:s.I,payload:e.data})}),(function(e){return a({type:s.J,status:s.G,payload:e})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},444:function(e,t,a){"use strict";var n=a(32),r=a(33),l=a(69),c=a(68),s=a(70),o=a(325),i=a(0),u=a.n(i),d=a(383),m=a(557),p=a(384),b=a(5),f=a(19),E=a(1),g=a.n(E),h=a(28),v=a.n(h),N=a(31),y={children:g.a.node,bar:g.a.bool,multi:g.a.bool,tag:N.q,value:g.a.oneOfType([g.a.string,g.a.number]),max:g.a.oneOfType([g.a.string,g.a.number]),animated:g.a.bool,striped:g.a.bool,color:g.a.string,className:g.a.string,barClassName:g.a.string,cssModule:g.a.object},O=function(e){var t=e.children,a=e.className,n=e.barClassName,r=e.cssModule,l=e.value,c=e.max,s=e.animated,o=e.striped,i=e.color,d=e.bar,m=e.multi,p=e.tag,E=Object(f.a)(e,["children","className","barClassName","cssModule","value","max","animated","striped","color","bar","multi","tag"]),g=Object(N.s)(l)/Object(N.s)(c)*100,h=Object(N.m)(v()(a,"progress"),r),y=Object(N.m)(v()("progress-bar",d&&a||n,s?"progress-bar-animated":null,i?"bg-"+i:null,o||s?"progress-bar-striped":null),r),O=m?t:u.a.createElement("div",{className:y,style:{width:g+"%"},role:"progressbar","aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":c,children:t});return d?O:u.a.createElement(p,Object(b.a)({},E,{className:h,children:O}))};O.propTypes=y,O.defaultProps={tag:"div",value:0,max:100};var j=O,C=a(101),S=a(67),k=a(320),x=a(337),T=a(558),w=a(78),I=a(102),A=a(391),D=a(556),P=a(77),B=a(53),H={tooltips:{enabled:!1,custom:D.CustomTooltips},maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{ticks:{display:!1}}]}};function R(e){var t=e.job,a=t.name,n=t.eta,r=t.percentage,l=t.speed,c=t.speedAvg,s=t.size,o=t.bytes;return a&&!isNaN(l)?u.a.createElement(d.a,null,u.a.createElement(m.a,null,"Running Jobs"),u.a.createElement(p.a,null,u.a.createElement("p",null,a)," ",u.a.createElement(j,{value:r,className:"mb-2"},r," %")," ",u.a.createElement("p",null,u.a.createElement("strong",null,"Speed: "),Object(w.g)(l),"PS")," ",u.a.createElement("p",null,u.a.createElement("strong",null,"Average Speed: "),Object(w.g)(c),"PS")," ",u.a.createElement("p",null,u.a.createElement("strong",null,"Total transferred: "),Object(w.g)(o))," ",u.a.createElement("p",null,u.a.createElement("strong",null,"Size: "),Object(w.g)(s)),u.a.createElement("p",null,u.a.createElement("strong",null,"ETA: "),Object(w.m)(n)))):null}function M(e){var t=e.job,a=t.name,n=t.percentage,r=t.speed,l=t.size;return u.a.createElement(u.a.Fragment,null,u.a.createElement(C.a,{className:"runningJobs"},l&&r?u.a.createElement(S.a,{lg:12,className:"itemName"}," ",function(e){return e.length>30?e.substr(0,30)+" ... "+e.substr(-5):e}(a)," "," ","(",Object(w.g)(l),") - ",Object(w.g)(r),"PS "):u.a.createElement(S.a,{lg:12},"Calculating")),u.a.createElement(C.a,null,u.a.createElement(S.a,{lg:12},u.a.createElement(j,{value:n,className:"mb-2"},n," %"))))}function L(e){var t=e.stats,a=t.speed,n=t.bytes,r=t.checks,l=t.elapsedTime,c=t.deletes,s=t.errors,o=t.transfers,i=t.lastError;return u.a.createElement(d.a,null,u.a.createElement(m.a,null,u.a.createElement("strong",null,"Global Stats")),u.a.createElement(p.a,null,u.a.createElement("table",{className:"table"},u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("td",{className:"card-subtitle"},"Bytes Transferred:"),u.a.createElement("td",{className:"card-text"},Object(w.g)(n))),u.a.createElement("tr",null,u.a.createElement("td",{className:"card-subtitle"},"Average Speed:"),u.a.createElement("td",{className:"card-text"},Object(w.g)(a),"PS")),u.a.createElement("tr",null,u.a.createElement("td",{className:"card-subtitle"},"Checks:"),u.a.createElement("td",{className:"card-text"},r)),u.a.createElement("tr",null,u.a.createElement("td",{className:"card-subtitle"},"Deletes:"),u.a.createElement("td",{className:"card-text"},c)),u.a.createElement("tr",null,u.a.createElement("td",{className:"card-subtitle"},"Running since:"),u.a.createElement("td",{className:"card-text"},Object(w.m)(l))),u.a.createElement("tr",{className:s>0?"table-danger":""},u.a.createElement("td",{className:"card-subtitle"},"Errors:"),u.a.createElement("td",{className:"card-text"},s)),u.a.createElement("tr",null,u.a.createElement("td",{className:"card-subtitle"},"Transfers:"),u.a.createElement("td",{className:"card-text"},o)),u.a.createElement("tr",null,u.a.createElement("td",{className:"card-subtitle"},"Last Error:"),u.a.createElement("td",{className:"card-text"},i))))))}function _(e){var t=e.transferring;return void 0!==t?t.map((function(e,t){return u.a.createElement(R,{key:e.name,job:e})})):null}function J(e){var t=e.transferring;if(void 0!==t){var a=Object(w.i)(t,(function(e){return e.group}));console.log(a);var n=[];return a.forEach((function(e,t){console.log(e,t),n.push(u.a.createElement(F,{job:e,groupId:t,key:t}))})),n}return null}function F(e){var t=e.job,a=e.groupId,n=Object(i.useState)(!1),r=Object(o.a)(n,2),l=r[0],c=r[1],s=Object(i.useState)(!0),b=Object(o.a)(s,2),f=b[0],E=b[1];console.log(t);return t?u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(d.a,null,u.a.createElement(m.a,{onClick:function(){return c(!l)}},u.a.createElement(k.a,null,u.a.createElement(C.a,null,u.a.createElement(S.a,{sm:10},"Transferring ",t.length," file(s)"),u.a.createElement(S.a,{sm:2},u.a.createElement(x.a,{color:"light",disabled:!f,onClick:function(e){return function(e,t){if(e.stopPropagation(),t&&-1!==t.indexOf("/")){E(!1);var a=t.split("/")[1];P.a.post(B.a.stopJob,{jobid:a,_async:!0}).then((function(e){console.log(e)})).catch((function(e){console.error(e)}))}}(e,a)},className:"btn-outline-danger btn-pill"},u.a.createElement("i",{className:"fa fa-close fa-sm"})))))),u.a.createElement(T.a,{isOpen:l},u.a.createElement(p.a,null,t.map((function(e,t){return u.a.createElement(M,{key:e.name,job:e})})))))):null}var G=function(e){function t(e,a){var r;return Object(n.a)(this,t),(r=Object(l.a)(this,Object(c.a)(t).call(this,e,a))).toggleShowing=function(){r.setState((function(e){return{isShowing:!e.isShowing}}))},r.state={isShowing:!0},r}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.jobs,n=t.isConnected,r=t.lineChartData,l=a.transferring,c=this.props.mode;return"full-status"===c?n?u.a.createElement(C.a,null,u.a.createElement(S.a,{sm:12,lg:6},u.a.createElement(L,{stats:a})),u.a.createElement(S.a,{sm:12,lg:6},u.a.createElement(d.a,null,u.a.createElement(m.a,null,"Speed"),u.a.createElement(p.a,null,u.a.createElement("div",{className:"chart-wrapper"},u.a.createElement(A.b,{data:r,options:H}))))),u.a.createElement(S.a,{sm:12,lg:4},u.a.createElement(_,{transferring:l}))):u.a.createElement("div",null,"Not connected to rclone."):"card"===c?n?u.a.createElement(J,{transferring:l}):u.a.createElement("div",null,"Not connected to rclone."):"modal"===c?l&&l.length>0?u.a.createElement(d.a,{className:"progress-modal d-none d-sm-block"},u.a.createElement(m.a,{onClick:function(){return e.toggleShowing()}},"Progress",u.a.createElement("div",{className:"card-header-actions"},u.a.createElement(x.a,{color:"link"},u.a.createElement("i",{className:"fa fa-close fa-lg"})))),u.a.createElement(p.a,{className:this.state.isShowing?"progress-modal-body":"d-none",style:{overflowY:"scroll"}},u.a.createElement(J,{transferring:l}))):null:void 0}}]),t}(u.a.Component);t.a=Object(I.b)((function(e,t){var a=e.status.speed,n={};if(a){var r=[],l=[],c=[],s=a.length;a.slice(s-50,s-1).forEach((function(e,t){r.push(Math.ceil(e.elapsedTime)),l.push(Object(w.c)(e.speed).toFixed(2)),c.push(Object(w.c)(e.speedAvg).toFixed(2))})),n={labels:r,datasets:[{label:"Speed (kbps)",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:l},{label:"Average Speed (kbps)",fill:!0,lineTension:.1,backgroundColor:"rgba(187,69,14,0.4)",borderColor:"rgb(192,76,58)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgb(187,69,14)",pointBackgroundColor:"#ff7459",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:c}]}}return{jobs:e.status.jobs,isConnected:e.status.isConnected,error:e.status.error,lineChartData:n}}),{})(G)},556:function(e,t,a){!function(e){"use strict";function t(e){var t=this,a="above",n="below",r="chartjs-tooltip",l="no-transform",c="tooltip-body",s="tooltip-body-item",o="tooltip-body-item-color",i="tooltip-body-item-label",u="tooltip-body-item-value",d="tooltip-header",m="tooltip-header-item",p={DIV:"div",SPAN:"span",TOOLTIP:(this._chart.canvas.id||function(){var e=function(){return(65536*(1+Math.random())|0).toString(16)},a="_canvas-"+(e()+e());return t._chart.canvas.id=a,a}())+"-tooltip"},b=document.getElementById(p.TOOLTIP);if(b||((b=document.createElement("div")).id=p.TOOLTIP,b.className=r,this._chart.canvas.parentNode.appendChild(b)),0!==e.opacity){if(b.classList.remove(a,n,l),e.yAlign?b.classList.add(e.yAlign):b.classList.add(l),e.body){var f=e.title||[],E=document.createElement(p.DIV);E.className=d,f.forEach((function(e){var t=document.createElement(p.DIV);t.className=m,t.innerHTML=e,E.appendChild(t)}));var g=document.createElement(p.DIV);g.className=c,e.body.map((function(e){return e.lines})).forEach((function(t,a){var n=document.createElement(p.DIV);n.className=s;var r=e.labelColors[a],l=document.createElement(p.SPAN);if(l.className=o,l.style.backgroundColor=r.backgroundColor,n.appendChild(l),t[0].split(":").length>1){var c=document.createElement(p.SPAN);c.className=i,c.innerHTML=t[0].split(": ")[0],n.appendChild(c);var d=document.createElement(p.SPAN);d.className=u,d.innerHTML=t[0].split(": ").pop(),n.appendChild(d)}else{var m=document.createElement(p.SPAN);m.className=u,m.innerHTML=t[0],n.appendChild(m)}g.appendChild(n)})),b.innerHTML="",b.appendChild(E),b.appendChild(g)}var h=this._chart.canvas.getBoundingClientRect(),v=this._chart.canvas.offsetTop,N=this._chart.canvas.offsetLeft+e.caretX,y=v+e.caretY,O=e.width/2;N+O>h.width?N-=O:N<O&&(N+=O),b.style.opacity=1,b.style.left=N+"px",b.style.top=y+"px"}else b.style.opacity=0}var a=t;e.CustomTooltips=t,e.customTooltips=a,Object.defineProperty(e,"__esModule",{value:!0})}(t)},558:function(e,t,a){"use strict";var n,r=a(5),l=a(19),c=a(324),s=a(21),o=a(326),i=a(0),u=a.n(i),d=a(1),m=a.n(d),p=a(28),b=a.n(p),f=a(344),E=a(31),g=Object(o.a)({},f.Transition.propTypes,{isOpen:m.a.bool,children:m.a.oneOfType([m.a.arrayOf(m.a.node),m.a.node]),tag:E.q,className:m.a.node,navbar:m.a.bool,cssModule:m.a.object,innerRef:m.a.oneOfType([m.a.func,m.a.string,m.a.object])}),h=Object(o.a)({},f.Transition.defaultProps,{isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:E.e.Collapse}),v=((n={})[E.d.ENTERING]="collapsing",n[E.d.ENTERED]="collapse show",n[E.d.EXITING]="collapsing",n[E.d.EXITED]="collapse",n);function N(e){return e.scrollHeight}var y=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={height:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach((function(e){a[e]=a[e].bind(Object(c.a)(a))})),a}Object(s.a)(t,e);var a=t.prototype;return a.onEntering=function(e,t){this.setState({height:N(e)}),this.props.onEntering(e,t)},a.onEntered=function(e,t){this.setState({height:null}),this.props.onEntered(e,t)},a.onExit=function(e){this.setState({height:N(e)}),this.props.onExit(e)},a.onExiting=function(e){e.offsetHeight;this.setState({height:0}),this.props.onExiting(e)},a.onExited=function(e){this.setState({height:null}),this.props.onExited(e)},a.render=function(){var e=this,t=this.props,a=t.tag,n=t.isOpen,c=t.className,s=t.navbar,i=t.cssModule,d=t.children,m=(t.innerRef,Object(l.a)(t,["tag","isOpen","className","navbar","cssModule","children","innerRef"])),p=this.state.height,g=Object(E.o)(m,E.c),h=Object(E.n)(m,E.c);return u.a.createElement(f.Transition,Object(r.a)({},g,{in:n,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),(function(t){var n=function(e){return v[e]||"collapse"}(t),l=Object(E.m)(b()(c,n,s&&"navbar-collapse"),i),m=null===p?null:{height:p};return u.a.createElement(a,Object(r.a)({},h,{style:Object(o.a)({},h.style,{},m),className:l,ref:e.props.innerRef}),d)}))},t}(i.Component);y.propTypes=g,y.defaultProps=h,t.a=y}}]);
//# sourceMappingURL=4.f894a8d7.chunk.js.map